# IndependentWork12  
## –¢–µ–º–∞: PLINQ ‚Äî –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –±–µ–∑–ø–µ–∫–∏  
### –ê–≤—Ç–æ—Ä: *[–¢–≤–æ—î —ñ–º'—è]*  
### –ì—Ä—É–ø–∞: *[—Ç—É—Ç –≤—Å—Ç–∞–≤ –≥—Ä—É–ø—É]*  

## –ú–µ—Ç–∞ —Ä–æ–±–æ—Ç–∏
–î–æ—Å–ª—ñ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏ PLINQ (Parallel LINQ) —É –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∑—ñ –∑–≤–∏—á–∞–π–Ω–∏–º LINQ, –≤–∏–º—ñ—Ä—è—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –æ–±—Å—è–≥–∞—Ö –¥–∞–Ω–∏—Ö —Ç–∞ —Ä–æ–∑–≥–ª—è–Ω—É—Ç–∏ –º–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—Å—Ç—ñ –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ–π –æ–±—Ä–æ–±—Ü—ñ –∫–æ–ª–µ–∫—Ü—ñ–π.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏
- PLINQ (Microsoft Docs)  
- When to use PLINQ  
- PLINQ Side Effects  
- Stopwatch (Microsoft Docs)  
- –ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –∑ Google Classroom  

# üîß –•—ñ–¥ —Ä–æ–±–æ—Ç–∏

## 1Ô∏è–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Å–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É  
–°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–æ—î–∫—Ç **IndependentWork12** —É Visual Studio.

## 2Ô∏è–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö  
–ë—É–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∫–æ–ª–µ–∫—Ü—ñ—è `List<int>` –∑ —Ä–æ–∑–º—ñ—Ä–∞–º–∏:

- **1 000 000**
- **5 000 000**
- **10 000 000** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

–ï–ª–µ–º–µ–Ω—Ç–∏ –∑–∞–ø–æ–≤–Ω—é–≤–∞–ª–∏—Å—è –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ —á–∏—Å–ª–∞–º–∏ –≤—ñ–¥ 1 –¥–æ 1 000 000.

## 3Ô∏è–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó  

–î–ª—è –∫–æ–∂–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤–∏–∫–æ–Ω—É–≤–∞–ª–æ—Å—è:

- —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è (x > 1000, x –Ω–µ–ø–∞—Ä–Ω–µ);
- –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø—Ä–æ—Å—Ç–µ —á–∏—Å–ª–æ (–¥—ñ–ª–µ–Ω–Ω—è –¥–æ sqrt(n));
- –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è (Math.Sqrt, Sin, Cos —É —Ü–∏–∫–ª—ñ).

–¶–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É—î CPU —ñ –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ PLINQ.

## 4Ô∏è–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ LINQ vs PLINQ  

### –ú–µ—Ç–æ–¥–∏–∫–∏:
- **LINQ** ‚Äî –∑–≤–∏—á–∞–π–Ω–µ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.  
- **PLINQ** ‚Äî `.AsParallel()` –∑ –ø—Ä–∏–º—É—Å–æ–≤–æ—é –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—î—é.

### ‚è± –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É:
–î–ª—è –≤–∏–º—ñ—Ä—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è `System.Diagnostics.Stopwatch`.

### –†–ï–ó–£–õ–¨–¢–ê–¢–ò (–≤—Å—Ç–∞–≤ —Å–≤–æ—ó –∑–Ω–∞—á–µ–Ω–Ω—è):

| –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ | LINQ (–º—Å) | PLINQ (–º—Å) | –†—ñ–∑–Ω–∏—Ü—è |
|--------------------|-----------|------------|----------|
| 1 000 000          | ____ –º—Å   | ____ –º—Å    | ____     |
| 5 000 000          | ____ –º—Å   | ____ –º—Å    | ____     |
| 10 000 000         | ____ –º—Å   | ____ –º—Å    | ____     |

## –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ö–æ–ª–∏ PLINQ —à–≤–∏–¥—à–∏–π?
- –ø—Ä–∏ **–≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥–∞—Ö –¥–∞–Ω–∏—Ö (5M‚Äì10M)**;
- –ø—Ä–∏ **–≤–∞–∂–∫–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω–Ω—è—Ö**, —è–∫—ñ –¥–æ–±—Ä–µ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –º—ñ–∂ —è–¥—Ä–∞–º–∏ CPU.

–ü—Ä–∏—á–∏–Ω–∞: –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å –¥–∞—î —Ä–µ–∞–ª—å–Ω–∏–π –ø—Ä–∏—Ä—ñ—Å—Ç –ª–∏—à–µ –∫–æ–ª–∏ —Ä–æ–±–æ—Ç–∏ –±–∞–≥–∞—Ç–æ.

### –ö–æ–ª–∏ LINQ –º–æ–∂–µ –±—É—Ç–∏ —à–≤–∏–¥—à–∏–º?
- –ø—Ä–∏ –º–∞–ª–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ—è—Ö;
- –∫–æ–ª–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–∞–¥ –µ–ª–µ–º–µ–Ω—Ç–æ–º **–¥–µ—à–µ–≤–∞**;
- –∫–æ–ª–∏ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ PLINQ (–ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤, –∑–ª–∏—Ç—Ç—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤) –±—ñ–ª—å—à—ñ, –Ω—ñ–∂ –≤–∏–≥–æ–¥–∞.

# –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º –±–µ–∑–ø–µ–∫–∏ (–ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏)

–ë—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–∫–ª–∞–¥ –∑ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é —Å–ø—ñ–ª—å–Ω–æ—ó –∑–º—ñ–Ω–Ω–æ—ó –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ PLINQ:

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –∫–æ–¥:
```csharp
int wrongSum = 0;
data.AsParallel().ForAll(x => wrongSum += x);
